{% extends "linguistics/words/base.html" %}

{% import 'linguistics/words/macros.html' as words_macros with context %}

{% block title %}Слово «{{word.utg_word.normal_form()}}» |{{ super() }}{% endblock %}
{% block description %}Описание слова «{{word.utg_word.normal_form()}}».{% endblock %}

{% block words_content %}

{% if word.state.is_IN_GAME %}
<p class="alert alert-success pgf-word-in-game-message">Слово находится в игре.</p>
{% endif %}

{% if word.state.is_ON_REVIEW %}
<p class="alert alert-warning pgf-word-on-review-message">Слово находится на рассмотрении.</p>
{% endif %}

{% if child_word %}
<p class="alert alert-success pgf-has-child-message">Это слово имеет непроверенную <a href="{{url('linguistics:words:show', child_word.id)}}">копию</a>.</p>
{% endif %}

{% if parent_word %}
<p class="alert alert-success pgf-has-parent-message">Это слово явялется копией <a href="{{url('linguistics:words:show', parent_word.id)}}">слова из игры</a>.</p>
{% endif %}

<ul>
  <li>в игровых фразах: {{word.used_in_ingame_templates}}</li>
  <li>в рассматриваемых фразах: {{word.used_in_onreview_templates}}</li>
  <li>
    автор:

    {% if author %}
      <a href="{{url('accounts:show', word.author_id)}}">{{author.nick}}</a>
      {% if clan is not none %}
        <a href="{{url('accounts:clans:show', clan.id)}}">[{{clan.abbr}}]</a>
      {% endif %}
    {% else %}
      нет
    {% endif %}

  </li>
</ul>

<h2>{{word.utg_word.normal_form()|up_first}} <small>{{word.type.text}}, {{word.state.text}}</small></h2>

{{words_macros.render_word(drawer)}}

{% if resource.can_edit_words %}
<a class="btn btn-info pgf-edit-button" href="{{url('linguistics:words:new', type=word.type.value, parent=word.id)}}">Редактировать</a>
{% endif %}

{% if resource.can_moderate_words and word.state.is_ON_REVIEW %}
<a class="btn btn-success pgf-forms-post-simple pgf-in-game-button" href="{{url('linguistics:words:in-game', word.id)}}">В игру</a>
{% endif %}

{% if resource.can_moderate_words %}
<a class="btn btn-danger pgf-forms-post-simple pgf-remove-button"
   href="{{url('linguistics:words:remove', word.id)}}"
   data-action-type="redirect"
   data-redirect-url="{{url('linguistics:words:')}}">Удалить</a>
{% endif %}

{% endblock %}
