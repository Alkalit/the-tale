
{% extends "bills/base.html" %}

{% block title %}Создание нового законопроекта | Законопроекты | {{ super() }}{% endblock %}

{% block head %}
{{ super() }}
<script type="text/javascript">
jQuery(document).ready( function(e) {

    var newForm = new pgf.forms.Form(jQuery('#pgf-new-bill-form'),
                                               {OnSuccess: function(instance, data){location.href = data.data.next_url;}});

    pgf.base.AddPreview('#pgf-new-bill-form', 'textarea', "{{ url('portal:preview') }}");
    pgf.base.InitBBFields();
});

</script>

{% endblock %}

{% block bills_content %}

<h2>Создание нового закона</h2>

<ul>
  <li>Подробную информацию о функционировании системы политики Вы можете найти в соответствующем раздел Путеводителя: <a href="{{url('guide:politics')}}">«Политика»</a>.</li>
  <li>Старательно выбирайте название законопроекта и его обоснование — это один из критериев, по которому другие игроки будут решать поддержать вашу инициативу или нет.</li>
  <li>Прежде чем создать законопроект, внимательно перечитайте его и проверьте на ошибки - при любом редактировании теряются все накопленные голоса.</li>
  <li>Будьте оригинальны!</li>
</ul>

<br/>

<h3>{{ bill_class.CAPTION }}</h3>

<form id="pgf-new-bill-form" method="post" action="{{ url('game:bills:create') }}?type={{bill_class.type_str}}">

  {{ form.errors_container }}

  {{ form.caption.widget }}

  {% include bill_class.USER_FORM_TEMPLATE with context %}

  <div class="pgf-edit-content">
    {{ form.rationale.widget }}
  </div>

  <div class="pgf-preview-content pgf-hidden">
  </div>

  <div class="widget">
    <input type="submit" value="Создать"/>
    <input type="button" class="pgf-preview-button" value="Предпросмотр"/>
    <input type="button" class="pgf-edit-button pgf-hidden" value="Редактировать"/>
  </div>

</form>

{% endblock %}
