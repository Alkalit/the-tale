{% extends "base.html" %}

{% block head %}
<script src="{{ STATIC_URL }}game/widgets.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}game/map/map.js" type="text/javascript"></script>
<script type="text/javascript">

var updater = undefined;
var widgets = {};

jQuery(document).ready(function(e){
    updater = new pgf.game.Updater({url: "{{ url('game:info') }}"});

    widgets.tabs = new pgf.game.widgets.GameTabs('#pgf-game-tabs', {});

    widgets.cards = new pgf.game.widgets.Cards('#pgf-cards-widget', 
                                               updater, widgets,
                                               {tooltipTemplate: '#pgf-card-tooltip-template'});

    widgets.heroes = new pgf.game.widgets.Heroes('#pgf-heroes-widget', 
                                                 updater, widgets,
                                                 {});

    widgets.date = new pgf.game.widgets.Date('#pgf-date-widget', 
                                             updater, widgets,
                                             {});

    var mapObjectsLayer = new pgf.game.map.ObjectsLayer({idPrefix: 'map-object'});

    widgets.map = new pgf.game.map.Map({
        root: '#pgf-map',
        zIndexBegin: 1,
        layers: [ 
            new pgf.game.map.BackgroundLayer({
                tileSize: 256,
                tileSrc: '{{ STATIC_URL }}game/map/img/bg.png'
            }),
            mapObjectsLayer,
            new pgf.game.map.NavigationLayer({})
        ],
        zooms: [1, 2, 3, 4, 6, 8, 12, 24],
        curZoom: 0,
        wndPos: {x: 0, y: 0},
        mapPos: {x: -100, y: -100},
        mapSize: {w: 1000, h: 1000},
        OnChange: function(m) {
            jQuery("#pgf-x-pos").text(m.GetPos().x);
            jQuery("#pgf-y-pos").text(m.GetPos().y);
            jQuery("#pgf-zoom-lvl").text(m.GetZoom().lvl);
            jQuery("#pgf-zoom-value").text(m.GetZoom().value);
        }
    });

    widgets.mapManager = new pgf.game.widgets.MapManager(updater, widgets, 
                                                         {infoSrc: "{{ url('game:map:') }}",
                                                          mapObjectsLayer: mapObjectsLayer,
                                                          cellSize: {{ map_settings.CELL_SIZE }},
                                                          templates: {cityTemplate: jQuery('#pgf-map-city-template'),
                                                                      heroTemplate: jQuery('#pgf-map-hero-template')}
                                                         });
        
    jQuery("#pgf-zoom-up").click(function(e){widgets.map.ZoomOut(); e.preventDefault();});
    jQuery("#pgf-zoom-down").click(function(e){widgets.map.ZoomIn(); e.preventDefault();});

    updater.Refresh();
});

</script>
{% endblock %}

{% block content %}

<div id="game-page">

  <div id="left-column" class="column">

    <div id="hero-base-block" class="info-block">
      <strong class="name">(19) Hero Name</strong> 
      <div class="health-bar">
        <div class="stats-bar">
          <div class="layer layer-1"></div>
          <div class="layer layer-2"></div>
        </div>
        130/999 + 53
      </div>
      <table class="stats"> 
        <tr>
          <td class="stat-record">
            <img class="stat-icon" src="{{ STATIC_URL }}tmp/intellect-icon.png"/>
            <span class="stat-value">5 (+1)</span>
          </td>
          <td class="stat-record">
            <img class="stat-icon" src="{{ STATIC_URL }}tmp/armor-icon.gif"/>
            <span class="stat-value">12 (+3)<span>
          </td>
        </tr>
        <tr>
          <td class="stat-record">
            <img class="stat-icon" src="{{ STATIC_URL }}tmp/constitution-icon.png"/>
            <span class="stat-value">3 (-1)</span>
          </td>
          <td class="stat-record">
            <img class="stat-icon" src="{{ STATIC_URL }}tmp/gold-icon.png"/>
            <span class="stat-value">1568<span>
          </td>
        </tr>
        <tr>
          <td class="stat-record">
            <img class="stat-icon" class="stat-icon" src="{{ STATIC_URL }}tmp/reflexes-icon.jpg"/>
            <span class="stat-value">5</span>
          </td>
          <td class="stat-record">
            <img class="stat-icon" class="stat-icon" src="{{ STATIC_URL }}tmp/quests-icon.png"/>
            <span class="stat-value">133</span>
          </td>
        </tr>
        <tr>
          <td class="stat-record">
            <img class="stat-icon" src="{{ STATIC_URL }}tmp/chaoticity-icon.png"/> 
            <span class="stat-value">2 (-1)</span>
          </td>
          <td class="stat-record">
            <img class="stat-icon" src="{{ STATIC_URL }}tmp/death-icon.gif"/>
            <span class="stat-value">29</span>
          </td>
        </tr>
      </table>
    </div>

    <div id="hero-effects-block" class="info-block active-effects-block">
      <img class="effect-icon" src="{{ STATIC_URL }}tmp/effect-1.jpg">
      <img class="effect-icon" src="{{ STATIC_URL }}tmp/effect-2.png">
      <img class="effect-icon" src="{{ STATIC_URL }}tmp/effect-3.jpg">
      <img class="effect-icon" src="{{ STATIC_URL }}tmp/effect-4.gif">
    </div>

    <div id="hero-equipment-block" class="info-block">
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/weapon-icon.png"/>
        <span class="item-name first">оружие</span>
      </div>
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/helmet-icon.png"/>
        <span class="item-name first">шлем</span>
      </div>
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/amulet-icon.png"/>
        <span class="item-name first">амулет 1</span>
        <span class="item-name">амулет 2</span>
      </div>
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/shoulders-icon.png"/>
        <span class="item-name first">плечи</span>
      </div>
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/plate-icon.png"/>
        <span class="item-name first">грудь</span>
      </div>
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/gloves-icon.png"/>
        <span class="item-name first">перчатки</span>
      </div>
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/cloak-icon.png"/>
        <span class="item-name first">плащ</span>
      </div>
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/pants-icon.png"/>
        <span class="item-name first">ноги</span>
      </div>
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/boots-icon.png"/>
        <span class="item-name first">сапоги</span>
      </div>
      <div class="equipment-record">
        <img class="item-type" src="{{ STATIC_URL }}tmp/rings-icon.png"/>
        <span class="item-name first">кольцо 1</span>
        <span class="item-name">кольцо 2</span>
        <span class="item-name">кольцо 3</span>
        <span class="item-name">кольцо 4</span>
      </div>
    </div>

    <div id="hero-bag-block" class="info-block">
      <table>
        <tr><td>добыча 1</td><td>1 * 130 г.</td><tr>
        <tr><td>лут 1</td><td>3 * 30 г.</td><tr>
        <tr><td>добыча 1</td><td>4 * 10 г.</td><tr>
        <tr><td>лут 1</td><td>1 * 13 г.</td><tr>
        <tr><td>добыча 1</td><td>4 * 130 г.</td><tr>
        <tr><td>лут 1</td><td>5 * 1120 г.</td><tr>
        <tr><td>добыча 1</td><td>12 *230 г.</td><tr>
        <tr><td>лут 1</td><td>1 * 230 г.</td><tr>
        <tr><td>добыча 1</td><td>1 * 30 г.</td><tr>
        <tr><td>лут 1</td><td>1 * 10 г.</td><tr>
      </table>
    </div>
  </div>

  <div id="center-column" class="column">

    <div id="world-place-time-block" class="info-block">

      <div class="place">
        <span class="name">Дорога между Лесом и Деревней</span><br/>
        <span class="comment">пройдено больше половины</span>
      </div>
      
      <div class="time">
        <div class="time-value">
          6 часов<br/>
          10 Мая 1203
        </div>
        <img class="season-icon" src="{{ STATIC_URL }}tmp/moon-time-icon.gif"/>
      </div>

    </div>    

    <div id="current-action-block" class="info-block">
      
      <table>
        <tr>
          <td class="quests-line">
            <img class="quest-icon" src="{{ STATIC_URL }}tmp/kill-quest-icon.png"/>
            <img class="quest-icon" src="{{ STATIC_URL }}tmp/delivery-quest-icon.png"/>
            <img class="quest-icon" src="{{ STATIC_URL }}tmp/speak-quest-icon.png"/>
            <img class="quest-icon" src="{{ STATIC_URL }}tmp/kill-quest-icon.png"/>
            <img class="quest-icon" src="{{ STATIC_URL }}tmp/kill-quest-icon.png"/>
          </td>
          <td class="action-info" rowspan="2">
            <strong class="name">(XX) NPC Name</strong> 
            <div class="health-bar">
              <div class="stats-bar">
                <div class="layer layer-1"></div>
                <div class="layer layer-2"></div>
              </div>
              30/99 + 3
            </div>
            <table class="stats"> 
              <tr>
                <td class="stat-record">
                  <img class="stat-icon" src="{{ STATIC_URL }}tmp/intellect-icon.png"/>
                  <span class="stat-value">4</span>
                </td>
                <td class="stat-record">
                  <img class="stat-icon" src="{{ STATIC_URL }}tmp/armor-icon.gif"/>
                  <span class="stat-value">1<span>
                </td>
              </tr>
              <tr>
                <td class="stat-record">
                  <img class="stat-icon" src="{{ STATIC_URL }}tmp/constitution-icon.png"/>
                  <span class="stat-value">3</span>
                </td>
                <td class="stat-record">
                  <img class="stat-icon" src="{{ STATIC_URL }}tmp/gold-icon.png"/>
                  <span class="stat-value">????<span>
                </td>
              </tr>
              <tr>
                <td class="stat-record">
                  <img class="stat-icon" class="stat-icon" src="{{ STATIC_URL }}tmp/reflexes-icon.jpg"/>
                  <span class="stat-value"> 2</span>
                </td>
                <td class="stat-record">
                  <img class="stat-icon" class="stat-icon" src="{{ STATIC_URL }}tmp/quests-icon.png"/>
                  <span class="stat-value"> - </span>
                </td>
              </tr>
              <tr>
                <td class="stat-record">
                  <img class="stat-icon" src="{{ STATIC_URL }}tmp/chaoticity-icon.png"/> 
                  <span class="stat-value">2</span>
                </td>
                <td class="stat-record">
                  <img class="stat-icon" src="{{ STATIC_URL }}tmp/death-icon.gif"/>
                  <span class="stat-value"> - </span>
                </td>
              </tr>
            </table>
          </td>
        </tr>

        <tr>
          <td class="action-progress">
            <table class="actions">
              <tr class="prev-previous">
                <td>
                  <span class="name">выполняет задание</span>
                </td>
                <td>
                  <div class="progress-bar">
                  <div class="stats-bar">
                    <div class="layer layer-1"></div>
                    <div class="layer layer-2"></div>
                  </div>            
                  (33%)
                </td>
              </tr>
              <tr class="previous">
                <td>
                  <span class="name">путешетсвует</span>
                </td>
                <td>
                  <div class="progress-bar">
                    <div class="stats-bar">
                      <div class="layer layer-1"></div>
                      <div class="layer layer-2"></div>
                    </div>            
                    (33%)
                </td>
              </tr>
              <tr class="current">
                <td>
                  <span class="name">сражается</span>
                </td>
                <td>
                  <div class="progress-bar">
                    <div class="stats-bar">
                      <div class="layer layer-1"></div>
                      <div class="layer layer-2"></div>
                    </div>            
                    (33%)
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>

    </div>

    <div id="log-block" class="info-block">
      <ul class="log">
        <li class="message">Герой ударил НПЦ и нанёс 10 единиц повреждений</li>
        <li class="message">Герой ударил НПЦ и промахнулся</li>
        <li class="message">НПЦ опрокинул героя на землю</li>
      </ul>
    </div>    

    <div id="journal-block" class="info-block">
      <ul class="journal">
        <li class="message">
          <span>[5 часов, 10 мая]</span><br/>
          <span> 
            Очень длинная запись в журнале о каком-то важном событии, буть то выполнение квеста, убийство СИЛЬНОГО моба или нахождение клада. Мелочь сюда писать НЕЛЬЗЯ! Здесь должна находиться только важная для истории информация.
          </span>
        </li>

        <li class="message">
          <span>[3 часа, 10 мая]</span><br/>
          <span> 
            Очень длинная запись в журнале о каком-то важном событии, буть то выполнение квеста, убийство СИЛЬНОГО моба или нахождение клада. Мелочь сюда писать НЕЛЬЗЯ! Здесь должна находиться только важная для истории информация.
          </span>
        </li>

        <li class="message">
          <span>[1 час, 10 мая]</span><br/>
          <span> 
            Очень длинная запись в журнале о каком-то важном событии, буть то выполнение квеста, убийство СИЛЬНОГО моба или нахождение клада. Мелочь сюда писать НЕЛЬЗЯ! Здесь должна находиться только важная для истории информация.
          </span>
        </li>

        <li class="message">
          <span>[18 часов, 9 мая]</span><br/>
          <span> 
            Очень длинная запись в журнале о каком-то важном событии, буть то выполнение квеста, убийство СИЛЬНОГО моба или нахождение клада. Мелочь сюда писать НЕЛЬЗЯ! Здесь должна находиться только важная для истории информация.
          </span>
        </li>
      </ul>
    </div>    
  </div>

  <div id="right-column" class="column">

    <div id="angel-base-block" class="info-block">
      <strong class="name">Angel Name</strong> 
      <div class="energy-bar">
        <div class="stats-bar">
          <div class="layer layer-1"></div>
          <div class="layer layer-2"></div>
        </div>
        130/999 + 3
      </div>
    </div>

    <div id="angel-effects-block" class="info-block active-effects-block">
      <img class="effect-icon" src="{{ STATIC_URL }}tmp/effect-2.png">
      <img class="effect-icon" src="{{ STATIC_URL }}tmp/effect-3.jpg">
      <img class="effect-icon" src="{{ STATIC_URL }}tmp/effect-4.gif">
    </div>

    <div id="angel-actions-block" class="info-block">
      <table>
        <tr class="action-record">
          <td><img class="icon" src="{{ STATIC_URL }}tmp/create-hero-card.png"/></td>
          <td>Создать героя</td>
          <td>0</td>
        </tr>
        <tr class="action-record">
          <td><img class="icon" src="{{ STATIC_URL }}tmp/kick-card.png"/></td>
          <td>Пнуть!</td>
          <td>25</td>
        </tr>
      </table>
    </div>

  </div>

</div>

<!-- <div id="pgf-game-tabs" class="game-tabs"> -->

<!--   <div id="pgf-game-tabs-head"> -->
<!--     <a href="" id="pgf-cards-link" class="pgf-tab-link">Deck</a> -->
<!--     <a href="" id="pgf-tmp-link" class="pgf-tab-link">Tmp</a> -->
<!--   </div> -->

<!--   <div id="pgf-game-tabs-body"> -->
    
<!--     <div id="pgf-cards-tab" class="pgf-tab cards-tab"> -->

<!--       <div id="pgf-cards-widget"> -->
<!--         <div class="pgf-cards-widget-content">  -->

<!--           <ul class="pgf-cards-list"> -->
<!--             <li class="pgf-template card-record pgf-card-record"> -->
<!--               <span class="pgf-card-name"></span> -->
<!--               <a href="#" class="pgf-card-form-link">activate</a> -->
<!--             </li> -->
<!--           </ul> -->

<!--         </div> -->
<!--       </div> -->

<!--     </div> -->

<!--     <div id="pgf-tmp-tab" class="pgf-tab"> -->
<!--     </div> -->

<!--   </div> -->

<!-- </div> -->

<!-- {% macro hero_base_panel() %} -->
<!-- <div> -->
<!--   (<span class="pgf-wisdom"></span>) <span class="pgf-name"></span> -->
<!--   <div class="pgf-attr-primary"> -->
<!--     I <span class="pgf-intellect"></span> -->
<!--     CO <span class="pgf-constitution"></span> -->
<!--     R <span class="pgf-reflexes"></span> -->
<!--     CH <span class="pgf-chaoticity"></span> -->
<!--   </div> -->
<!--   health: <span class="pgf-health"></span> [<span class="pgf-max-health"></span>] -->
<!--   <br/> -->
<!--   Action: <span class="pgf-short-description"></span> (<span class="pgf-percents"></span>%)  -->
<!--   [<span class="pgf-entropy"></span>/<span class="pgf-entropy-barier"></span>] -->
<!--   <br/> -->
<!--   Position: (<span class="pgf-position-type"></span>) <span class="pgf-position-name"></span> -->
<!--   <br/> -->
<!-- </div> -->
<!-- {% endmacro %} -->

<!-- <div id="pgf-heroes-widget" class="heroes-widget"> -->
<!--   <div class="pgf-heroes-widget-content"> -->
<!--     <ul class="pgf-heroes-list"> -->

<!--       <li class="pgf-template"> -->
<!--         {{ hero_base_panel() }} -->
<!--         <h2>Journal</h2> -->
<!--         <div class="pgf-messages-log"> -->
<!--           <ul> -->

<!--             <li class="pgf-template"> -->
<!--               id(<span class="pgf-message-pattern-id"></span>) -->
<!--               <br/> -->
<!--               <span class="pgf-message"></span> -->
<!--             </li> -->

<!--           </ul> -->
<!--         </div> -->
<!--       </li> -->

<!--     </ul> -->
<!--   </div> -->
<!-- </div> -->

<!-- <div id="pgf-enemy-widget" class="enemy-widget"> -->
<!--   {{ hero_base_panel() }} -->
<!-- </div> -->

<!-- <div id="pgf-date-widget" class="date-widget"> -->
<!--   <div class="pgf-date-content"> -->
<!--     turn: <span class="pgf-turn-number"></span> -->
<!--   </div> -->
<!-- </div> -->

<!-- <div id="pgf-map-widget" class="game-map-widget"> -->
<!--   <div id="pgf-map" class="game-map"></div> -->
<!--   <div class="navigation-panel"> -->
<!--     <input id="pgf-zoom-up" type="button" value="-"/> -->
<!--     <input id="pgf-zoom-down" type="button" value="+"/> -->
<!--   </div> -->
<!--   <div id="pgf-info" class="info-panel"> -->
<!--     x:<span id="pgf-x-pos"></span>, y:<span id="pgf-y-pos"></span> -->
<!--     zoom-lvl:<span id="pgf-zoom-lvl"></span>, zoom-value:<span id="pgf-zoom-value"></span> -->
<!--   </div> -->
<!-- </div> -->

<!-- <div id="pgf-card-tooltip-template" class="pgf-template card-tooltip"> -->
<!--   <strong class="pgf-card-name"></strong> -->
<!--   <div class="pgf-card-description card-description"></div> -->
<!--   <div class="pgf-card-artistic card-artistic"></div> -->
<!--   <div class="pgf-card-available-after card-avaliable"> -->
<!--     Available after <span class="pgf-card-available-after-value"></span> (turns) -->
<!--   </div> -->
<!-- </div> -->

<!-- <div id="pgf-map-city-template" class="pgf-template"> -->
<!--   <div style="width: 10px; height: 10px; background: green;"></div> -->
<!--   (<span class="pgf-place-size"></span>) <span class="pgf-place-name"></span> -->
<!-- </div> -->

<!-- <div id="pgf-map-hero-template" class="pgf-template"> -->
<!--   <div style="width: 6px; height: 6px; background: blue;"></div> -->
<!--   <span class="pgf-hero-name"></span> -->
<!-- </div> -->

{% endblock %}
