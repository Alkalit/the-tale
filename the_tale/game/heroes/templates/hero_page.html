{% extends "base.html" %}

{% import 'heroes/hero_short.html' as hero_short_macros with context %}
{% import 'heroes/hero_equipment.html' as hero_equipment_macros with context %}

{% block title %}Страница героя | {{ super() }}{% endblock %}

{% block head %}
{{ super() }}
<script src="{{ STATIC_URL }}game/data/constants.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}game/widgets.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}game/angel.js" type="text/javascript"></script>

<script type="text/javascript">

var updater = undefined;
var widgets = {};

jQuery(document).ready(function(e){

    updater = new pgf.game.Updater({url: "{{ url('game:info', account=master_account.id) }}"});

    setTimeout(function(){
        updater.Refresh();
    }, 0);

    pgf.base.InitializeTabs('hero-tab-main', 'attributes', [['.pgf-attributes-tab-button', 'attributes'],
                                                            ['.pgf-statistics-tab-button', 'statistics'],
                                                            ['.pgf-settings-tab-button', 'settings']]);
});

</script>

{% endblock %}

{% block content %}

<div id="hero-page-content" class="row">

  <div class="span3">

    {{ hero_short_macros.hero_short("hero-short-data", is_owner, false, master_account=master_account, health_bar=false or is_owner) }}

    <div class="block">
      {{ hero_equipment_macros.hero_equipment("hero-equipment", data_mode="pve") }}
    </div>
  </div>

  <div class="span8">

    <ul class="nav nav-tabs">
      <li class=""><a href="#pgf-attributes-container" class="pgf-attributes-tab-button" data-toggle="tab">Атрибуты</a></li>
      <li class=""><a href="#pgf-statistics-container" class="pgf-statistics-tab-button" data-toggle="tab">Статистика</a></li>
      {% if is_owner %}
      <li class="">
        <a href="#pgf-settings-container" class="pgf-settings-tab-button" data-toggle="tab">
          Настройки {% if not resource.hero.is_name_changed %}<span class="label label-important pgf-change-name-warning">укажите формы имени героя</span>{% endif %}
        </a>
      </li>
      {% endif %}
    </ul>

    <div class="row tab-content">
      <div class="tab-pane" id="pgf-attributes-container">

        <div class="span4">
          {% include "heroes/hero_abilities.html" with context %}
        </div>

        <div class="span4">
          {% include "heroes/hero_character.html" with context %}
        </div>
      </div>

      <div class="tab-pane" id="pgf-statistics-container">
        <div class="span8">
          {% include "heroes/hero_statistics.html" with context %}
        </div>
      </div>

      {% if is_owner %}
      <div class="tab-pane" id="pgf-settings-container">
        <div class="span8">
          {% include "heroes/hero_settings.html" with context %}
        </div>
      </div>
      {% endif %}

    </div>

</div>

{% endblock %}
