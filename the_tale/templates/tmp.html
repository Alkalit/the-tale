{% extends "base.html" %}

{% block head %}
{{ super() }}
<script src="{{ STATIC_URL }}game/map/map2.js" type="text/javascript"></script>

<script type="text/javascript">
    var map = undefined;

    jQuery(document).ready(function(){

        var TILE_SIZE = 48;

        var sprites = {
            'f': { src: "{{ STATIC_URL }}/tmp/map.png",
                   x: 3 * TILE_SIZE,
                   y: 0 * TILE_SIZE,
                   w: TILE_SIZE,
                   h: TILE_SIZE
            },
            '.': { src: "{{ STATIC_URL }}/tmp/map.png",
                   x: 0 * TILE_SIZE,
                   y: 0 * TILE_SIZE,
                   w: TILE_SIZE,
                   h: TILE_SIZE
            },
            '_': { src: "{{ STATIC_URL }}/tmp/map.png",
                   x: 0 * TILE_SIZE,
                   y: 3 * TILE_SIZE,
                   w: TILE_SIZE,
                   h: TILE_SIZE
            },
            'w': { src: "{{ STATIC_URL }}/tmp/map.png",
                   x: 14 * TILE_SIZE,
                   y: 2 * TILE_SIZE,
                   w: TILE_SIZE,
                   h: TILE_SIZE
            },
            'place': { src: "{{ STATIC_URL }}/tmp/map.png",
                       x: 4 * TILE_SIZE,
                       y: 4 * TILE_SIZE,
                       w: TILE_SIZE,
                       h: TILE_SIZE
            },
        };

        var spritesManager = new pgf.game.resources.ImageManager(sprites, 
                                                                 { OnSpritesInitialized : function() {
                                                                     map.CheckReadyState();
                                                                 } 
                                                                 });

        map = new pgf.game.map.Map('#pgf-game-map', 
                                   {spritesManager: spritesManager,
                                    mapUrl: '{{ STATIC_URL }}game/map/data/',
                                    tileSize: TILE_SIZE});
    });
</script>

{% endblock %}

{% block content %}

<div id="pgf-game-map">
  <div class="pgf-navigation-layer"></div>
  <canvas class="pgf-map-canvas" width="500" height="300"></canvas>
</div>

{% endblock %}
